# 学习笔记：UCLA EE215A - Introduction to Digital ICs (数字集成电路导论)

这份文档用于记录《UCLA EE215A》课程的学习心得、核心概念整理、实验记录以及待解决的问题。

---

## Module 1: CMOS 基础与制造工艺 (CMOS Fundamentals & Fabrication)

### 1.1 核心概念速查
*   **MOSFET 工作原理**:
    *   *增强型 MOSFET*: $V_{GS} > V_{TH}$ 时形成导电沟道。
    *   *耗尽型 MOSFET*: $V_{GS} = 0$ 时已有导电沟道。
    *   *阈值电压 ($V_{TH}$)*: 受衬底偏置 ($V_{BS}$) 影响，$V_{TH} = V_{TH0} + γ(\sqrt{2φ_F + V_{SB}} - \sqrt{2φ_F})$。
*   **CMOS 工艺步骤**:
    *   *晶圆制备*: 硅单晶生长、切片、抛光。
    *   *光刻*: 使用光刻胶和掩膜版定义图形。
    *   *刻蚀*: 干法刻蚀 (等离子体) 和湿法刻蚀 (化学溶液)。
    *   *掺杂*: 离子注入和热扩散。
    *   *金属化*: 铝或铜互连线的沉积。
*   **版图设计规则**:
    *   *最小宽度*: 晶体管、连线的最小尺寸。
    *   *最小间距*: 不同图形之间的最小距离。
    *   *最小包围*: 接触孔被有源区或多晶硅包围的最小距离。

### 1.2 重点难点记录
- [ ] MOSFET 的线性区和饱和区电流公式有何区别？
- [ ] 为什么 CMOS 工艺中需要阱 (Well) 和隔离 (Isolation)？

### 1.3 实验记录 (Lab 1)
*   **Lab 1 (CMOS Inverter)**:
    *   *仿真设置*: 使用 SPICE 定义 NMOS 和 PMOS 模型参数。
    *   *直流分析*: 扫描输入电压，观察输出电压变化。
    *   *瞬态分析*: 输入方波，观察输出波形和延迟。

---

## Module 2: CMOS 反相器与基本逻辑门 (CMOS Inverters & Logic Gates)

### 2.1 核心概念速查
*   **CMOS 反相器特性**:
    *   *电压传输特性 (VTC)*: 典型的反相器曲线，包含五个工作区域。
    *   *噪声容限*: $NM_H = V_{OH} - V_{IH}$，$NM_L = V_{IL} - V_{OL}$。
    *   *开关阈值 ($V_M$)*: $V_{in} = V_{out}$ 时的电压，理想情况下为 $V_{DD}/2$。
*   **CMOS 逻辑门设计**:
    *   *NAND 门*: PMOS 并联，NMOS 串联。
    *   *NOR 门*: PMOS 串联，NMOS 并联。
    *   *复合门*: 使用 pull-up (PMOS) 和 pull-down (NMOS) 网络实现复杂逻辑功能。
*   **传输门特性**:
    *   *双向传输*: 可以传输高电平和低电平。
    *   *无阈值损失*: 相比单个 NMOS 传输管，不会产生 $V_{DD} - V_{TH}$ 的电压降。

### 2.2 重点难点记录
- [ ] 为什么 CMOS NAND 门的 PMOS 要并联而 NMOS 要串联？
- [ ] 传输门相比单个 NMOS 传输管的优势具体体现在哪些方面？

### 2.3 实验记录 (Lab 2)
*   **Lab 2 (Logic Gates)**:
    *   *NAND 门设计*: 验证真值表和电压传输特性。
    *   *NOR 门设计*: 对比 NAND 和 NOR 门的性能差异。
    *   *传输门应用*: 实现 2:1 多路选择器。

---

## Module 3: 时序电路与寄存器 (Sequential Circuits & Registers)

### 3.1 核心概念速查
*   **锁存器 vs 触发器**:
    *   *锁存器*: 电平敏感，在使能信号有效期间透明。
    *   *触发器*: 边沿敏感，只在时钟边沿采样数据。
*   **D 触发器时序参数**:
    *   *建立时间 ($T_{setup}$)*: 数据在时钟边沿之前必须稳定的最小时间。
    *   *保持时间 ($T_{hold}$)*: 数据在时钟边沿之后必须保持稳定的最小时间。
    *   *时钟到输出延迟 ($T_{CQ}$)*: 从时钟边沿到输出稳定的时间。
*   **主从 D 触发器结构**:
    *   *主锁存器*: 在时钟为低电平时透明，采样输入数据。
    *   *从锁存器*: 在时钟为高电平时透明，输出主锁存器的数据。

### 3.2 重点难点记录
- [ ] 为什么主从触发器能够避免亚稳态传播？
- [ ] 建立时间违例和保持时间违例分别如何修复？

### 3.3 实验记录 (Lab 3)
*   **Lab 3 (D Flip-Flop)**:
    *   *主从结构实现*: 使用传输门和反相器构建 D 触发器。
    *   *时序分析*: 测量建立时间、保持时间和时钟到输出延迟。
    *   *亚稳态测试*: 在建立/保持时间窗口内改变输入，观察输出行为。

---

## Module 4: 互连线与延迟建模 (Interconnect & Delay Modeling)

### 4.1 核心概念速查
*   **互连线寄生参数**:
    *   *电阻*: $R = ρL/A$，与线长成正比，与截面积成反比。
    *   *电容*: $C = εA/d$，平行板电容模型。
    *   *电感*: 在高频下变得重要，$L ∝ L_{wire}$。
*   **延迟模型**:
    *   *集总 RC 模型*: 单个 RC 节点，$τ = RC$。
    *   *分布 RC 模型*: 多个 RC 段，更精确但计算复杂。
    *   *Elmore 延迟*: $τ_{Di} = \sum_{k=1}^{N} R_{ki}C_k$，估算分布 RC 线的延迟。
*   **连线优化技术**:
    *   *缓冲器插入*: 将长线分段，每段插入缓冲器。
    *   *线宽优化*: 增加线宽减少电阻，但增加电容。
    *   *屏蔽*: 在敏感信号线旁边放置地线，减少串扰。

### 4.2 重点难点记录
- [ ] Elmore 延迟模型在什么情况下会高估或低估实际延迟？
- [ ] 如何确定缓冲器插入的最佳位置和尺寸？

### 4.3 实验记录 (Lab 4)
*   **Lab 4 (Interconnect Analysis)**:
    *   *RC 线仿真*: 对比集总模型和分布模型的准确性。
    *   *缓冲器优化*: 在长 RC 线中插入缓冲器，观察延迟改善。
    *   *串扰分析*: 模拟相邻信号线之间的电容耦合效应。

---

## Module 5: 功耗分析与低功耗技术 (Power Analysis & Low-Power Techniques)

### 5.1 核心概念速查
*   **功耗组成**:
    *   *动态功耗*: $P_{dynamic} = αC_LV_{DD}^2f$，与开关活动、负载电容、电压平方和频率成正比。
    *   *短路功耗*: $P_{short-circuit} = I_{sc}V_{DD}$，输入信号边沿期间 PMOS 和 NMOS 同时导通。
    *   *静态功耗*: $P_{static} = I_{leakage}V_{DD}$，亚阈值漏电流和栅极漏电流。
*   **低功耗技术**:
    *   *时钟门控*: 关掉不工作模块的时钟，减少动态功耗。
    *   *电源门控*: 彻底切断不工作模块的电源，消除静态功耗。
    *   *多阈值电压*: 关键路径用低 $V_{TH}$ 晶体管，非关键路径用高 $V_{TH}$ 晶体管。
    *   *电压/频率缩放*: 根据性能需求动态调整 $V_{DD}$ 和 $f$。
*   **热管理考虑**:
    *   *功耗密度*: $P_{density} = P_{total}/A_{chip}$，单位面积的功耗。
    *   *散热*: 需要散热片、风扇或液冷系统来维持芯片温度。

### 5.2 重点难点记录
- [ ] 为什么降低供电电压对减少动态功耗如此有效？
- [ ] 电源门控面临的主要技术挑战是什么？

### 5.3 实验记录 (Lab 5)
*   **Lab 5 (Power Analysis)**:
    *   *功耗测量*: 使用 SPICE 测量不同工作频率下的总功耗。
    *   *时钟门控效果*: 对比启用和禁用时钟门控时的功耗差异。
    *   *电压缩放实验*: 观察不同供电电压下的性能和功耗 trade-off。

---

## 公式总结 (Formula Summary)

### 基本公式
*   **动态功耗**: $P_{dynamic} = αC_LV_{DD}^2f$
*   **Elmore 延迟**: $τ_{Di} = \sum_{k=1}^{N} R_{ki}C_k$
*   **最大时钟频率**: $f_{max} = 1/(T_{CQ} + T_{logic} + T_{setup})$
*   **噪声容限**: $NM_H = V_{OH} - V_{IH}$，$NM_L = V_{IL} - V_{OL}$

### 设计规则
*   **反相器尺寸比**: 通常 $W_P/W_N ≈ 2-3$ (考虑迁移率差异)
*   **缓冲器链优化**: 每级放大倍数 ≈ 3-4 (FO4 规则)
*   **连线延迟估算**: 在深亚微米工艺下，连线延迟 ≈ 门延迟

---

## 待解决问题 (Open Questions)

- [ ] 深入研究亚阈值漏电流的物理机制
- [ ] 学习先进的低功耗技术如近阈值计算
- [ ] 探索 3D IC 技术对互连线延迟的影响
- [ ] 研究新兴存储器技术 (RRAM, MRAM) 在数字 IC 中的应用